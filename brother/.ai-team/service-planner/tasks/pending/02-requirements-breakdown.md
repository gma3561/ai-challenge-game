# [P1] 요구사항 분해 (기능/비기능)

- 담당: Service Planner
- 예상소요: 1d
- 의존성: PRD, 이해관계자 인터뷰

## 목적
기능/비기능 요구사항을 카테고리화하고 우선순위를 매긴다.

## 산출물
- 요구사항 목록 + 우선순위 + 수용기준

## 완료 기준
- `PO/PRD.md`의 요구사항 섹션 업데이트

---

## 기능 요구사항(F)
- F1[P0]: 주문 생성/다건 등록
  - 수용기준: `POST /api/v1/orders` 201, `POST /api/v1/orders/{id}/items` 200, 유효성 오류 400 규격화
- F2[P0]: 주문 조회(OTP)
  - 수용기준: OTP 발급/검증, 조회 범위 최근 1년, 마스킹 처리
- F3[P0]: PIN 파싱/검증/락 내부 API
  - 수용기준: 파싱 정확도 ≥ 98%, 중복 차단, 지원 브랜드 락 처리 성공률 ≥ 99%
- F4[P0]: 정산/입금 실행
  - 수용기준: 금액 산정(시세×액면−수수료), 실패 재시도, 점검시간 큐잉
- F5[P1]: 시세/카탈로그 관리(어드민)
  - 수용기준: `rates`, `catalog` CRUD, 감사 로그 남김
- F6[P1]: 실시간 현황 피드(익명화)
  - 수용기준: 최근 N건 스트림/폴링 제공, 개인정보 미노출

## 비기능 요구사항(NF)
- NF1[P0]: 보안(OTP, 계좌실명 검증 연동, 민감정보 암호화, 로그 마스킹)
- NF2[P0]: 가용성 99.9%, 장애시 RTO ≤ 30분
- NF3[P0]: 관측성(요청 트레이싱, 에러/성능 알림, 업무 이벤트 감사)
- NF4[P1]: 성능(핵심 API p95 ≤ 600ms, 캐시 히트율 ≥ 80%)
- NF5[P1]: 컴플라이언스(개인정보 1년 보관 후 파기, 접근 통제)

## 제약/가정
- 8주 내 v1 출시, 소규모 팀 운영
- 실시간성보다 데이터 신뢰도 우선

## 리스크 및 완화
- 브랜드별 정책/락 미지원 → 지급 지연/한도 정책, 제휴 경로 확보
- 피싱/사기 리스크 → 리스크 스코어/보류 분기, OTP/계좌 실명 확인
- 트래픽 스파이크 → 캐시/리드 리플리카, 레이트 리밋
